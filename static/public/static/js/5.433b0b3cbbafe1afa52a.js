(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{200:function(e,t,n){var r=n(201);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,a);r.locals&&(e.exports=r.locals)},201:function(e,t,n){(t=e.exports=n(17)(!1)).push([e.i,".home-3vvV-.ant-layout{min-height:100vh;color:#f0f2f5;color:#333;position:relative;padding:0 15px;padding-top:64px;width:1000px;margin:0 auto;box-sizing:border-box}.home-3vvV- .ant-layout-content{margin-top:24px}\n",""]),t.locals={home:"home-3vvV-"}},202:function(e,t,n){var r=n(203);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,a);r.locals&&(e.exports=r.locals)},203:function(e,t,n){(t=e.exports=n(17)(!1)).push([e.i,".navBar-hTkCE{position:fixed;width:100%;top:0;left:0;color:#333;z-index:1;background:white;padding:0}.navBar-hTkCE .wrapper{width:1000px;padding:0 15px;margin:0 auto;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;left:auto;right:auto;top:0}.navBar-hTkCE .ant-menu-horizontal{line-height:64px}.navBar-hTkCE .right-box .userinfo{display:-webkit-box;display:flex;cursor:pointer;padding-right:10px;-webkit-box-align:center;align-items:center;height:100%}.navBar-hTkCE .right-box .userinfo .username{margin-left:10px}\n",""]),t.locals={navBar:"navBar-hTkCE"}},224:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n(13),s=n(200),c=n.n(s),u=n(30),l=n.n(u),p=n(202),d=n.n(p),h=n(11),m=n(33),f=n(12),b=n(43),g=n(41);const{Item:v,Divider:y}=h.Menu;class E extends r.PureComponent{constructor(e){super(e),l()(this,"state",{}),l()(this,"handleDropdownClick",({key:e})=>{switch(e){case"logout":Object(f.e)("",0),this.userInfo=null,this.props.updateLoginStatus(!1),this.props.history.replace("/login");break;case"login":this.props.history.replace("/login");break;case"personSetting":this.props.history.push("/userSetting");break;case"newArticle":Object(f.d)(""),this.props.history.push("/editor");break;case"blog":this.props.history.push("/blog");break;case"pictures":this.props.history.push("/pictures");break;case"system":this.props.history.push("/system")}}),l()(this,"getUserInfo",async()=>{const{status:e,user:t}=await Object(m.d)();"success"===e&&(this.userInfo=t)}),Object(f.b)()&&this.getUserInfo()}get userInfo(){return this.props.userInfo}set userInfo(e){this.props.updateUserInfo(e)}render(){const{userInfo:e}=this;let t=[];switch(this.props.location.pathname){case"/blog":t=["blog"];break;case"/system":t=["system"];break;default:t=[]}return a.a.createElement("div",{className:d.a.navBar},a.a.createElement(k,null,a.a.createElement(h.Menu,{mode:"horizontal",theme:"light",selectedKeys:t,onClick:this.handleDropdownClick},a.a.createElement(v,{key:"blog"},"Blog"),e&&0===e.role&&a.a.createElement(v,{key:"system"},"系统管理")),a.a.createElement("div",{className:"right-box"},a.a.createElement(h.Dropdown,{overlay:w(this,!!e)},e?a.a.createElement("div",{className:"userinfo"},a.a.createElement(b.a,{width:44,height:44,src:e.avatar}),a.a.createElement("div",{className:"username"},e.nickname||e.email)):a.a.createElement("div",{className:"userinfo"},a.a.createElement(b.a,{width:44,height:44,src:""}),a.a.createElement("div",{className:"username"},"游客"))))))}}function k({children:e}){const[t,n]=Object(r.useState)(0);return Object(r.useEffect)(()=>{const e=()=>{const e=document.documentElement.scrollLeft||document.body.scrollLeft;n(e)};return e(),document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e)}}),a.a.createElement("header",{className:"wrapper",style:{transform:`translate3d(-${t}px,0,0)`}},e)}function w(e,t){return t?a.a.createElement(h.Menu,{onClick:e.handleDropdownClick},a.a.createElement(v,{key:"newArticle"},a.a.createElement(h.Icon,{type:"edit"}),"写文章"),a.a.createElement(v,{key:"pictures"},a.a.createElement(h.Icon,{type:"picture"}),"我的图库"),a.a.createElement(v,{key:"personSetting"},a.a.createElement(h.Icon,{type:"user"}),"个人设置"),a.a.createElement(y,null),a.a.createElement(v,{key:"logout"},a.a.createElement(h.Icon,{type:"logout"}),"退出登录")):a.a.createElement(h.Menu,{onClick:e.handleDropdownClick},a.a.createElement(v,{key:"login"},a.a.createElement(h.Icon,{type:"login"}),"去登录"))}var x=Object(o.withRouter)(Object(i.b)((function(e){return{userInfo:e.common.userInfo}}),(function(e){return{updateUserInfo:t=>{e(Object(g.b)(t))},updateLoginStatus:t=>{e(Object(g.a)(t))}}}))(E)),j=n(5);const{Content:O}=h.Layout,I=Object(j.a)(()=>n.e(14).then(n.bind(null,219))),C=Object(j.a)(()=>Promise.all([n.e(1),n.e(7)]).then(n.bind(null,222))),S=Object(j.a)(()=>Promise.all([n.e(2),n.e(13)]).then(n.bind(null,220))),B=Object(j.a)(()=>Promise.all([n.e(1),n.e(12)]).then(n.bind(null,225))),R=Object(j.a)(()=>n.e(15).then(n.bind(null,221)));class L extends r.Component{render(){const{userInfo:e}=this.props;return a.a.createElement(h.Layout,{className:c.a.home},a.a.createElement(x,null),a.a.createElement(O,null,a.a.createElement(o.Switch,null,a.a.createElement(o.Route,{path:"/userSetting",component:C}),a.a.createElement(o.Route,{path:"/blog",component:I}),a.a.createElement(o.Route,{path:"/article/:id",component:S}),a.a.createElement(o.Route,{path:"/pictures",component:B}),e&&0===e.role&&a.a.createElement(o.Route,{path:"/system",component:R}),a.a.createElement(o.Redirect,{to:"/blog"}))))}}t.default=Object(o.withRouter)(Object(i.b)((function(e){return{userInfo:e.common.userInfo}}))(L))},31:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(32);function a(e,t){return Object(r.a)({url:"/article",method:"post",data:{title:e,markdown:t}})}function o(e,t={}){return Object(r.a)({url:`/article/${e}`,method:"put",data:t})}function i(e,t){return Object(r.a)({url:"/article",params:{pageSize:e,page:t}})}function s(e,t){return Object(r.a)({url:"/allArticle",params:{pageSize:e,page:t}})}function c(e){return Object(r.a)({url:`/article/${e}`})}function u(e,t){return Object(r.a)({url:"/articleVisit",method:"post",data:{articleId:e,userId:t}})}function l(e){return Object(r.a)({url:"/articleDelete",method:"post",data:{ids:e}})}},32:function(e,t,n){"use strict";var r=n(44),a=n.n(r),o=n(3),i=n(11),s=n(12),c=n(45);const u=a.a.create({baseURL:o.a.HTTP_BASE_URL,validateStatus:e=>e>=200&&e<500});t.a=async function(e){const t=Object(s.b)(),n=t?Object(c.merge)({headers:{Authorization:`Bearer ${t}`}},e):e,{data:r,status:a}=await u(n);if(401===a){const e="401";i.notification.error({message:"您未登录或者登录已失效",description:"点我重新登录",duration:null,style:{cursor:"pointer"},key:e,onClick(){location.replace("#/login"),i.notification.close(e)}})}return Promise.resolve(r)}},33:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return l}));var r=n(32),a=n(31);function o(e,t){return Object(r.a)({url:"/login",method:"post",data:{email:e,password:t}})}function i(){return Object(r.a)({url:"/user"})}function s(e,t){return Object(r.a)({url:"/user",method:"put",data:{avatar:t,nickname:e}})}function c(e){return Object(r.a)({url:"/mailVerifyCode",method:"post",data:{email:e}})}function u(e,t,n){return Object(r.a)({url:"/register",method:"post",data:{email:e,password:t,verifyCode:n}})}function l(e){return Object(r.a)({url:"/qcloud/uploadCredential",params:{type:e}})}n.d(t,"a",(function(){return a.b})),n.d(t,"b",(function(){return a.d})),n.d(t,"c",(function(){return a.f}))},39:function(e,t,n){e.exports=n.p+"./static/images/avatar.svg"},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(7);function a(e){return{type:r.b,userInfo:e}}function o(e){return{type:r.a,login:e}}},43:function(e,t,n){"use strict";var r=n(30),a=n.n(r),o=n(0),i=n.n(o),s=n(59),c=n.n(s);class u extends o.Component{constructor(e){super(e),a()(this,"handleError",()=>{this.setState({url:n(39)})}),this.state={url:e.src||n(39)}}componentWillReceiveProps(e){this.setState({url:e.src||n(39)})}render(){let{width:e,height:t}=this.props;const{url:n}=this.state;"number"==typeof(e=e||"100%")&&(e=`${e}px`),"number"==typeof(t=t||"100%")&&(t=`${t}px`);const r={width:e,height:t};return i.a.createElement("div",{className:c.a.avatar,style:r},i.a.createElement("img",{src:n,alt:"avatar",onError:this.handleError}))}}t.a=u},59:function(e,t,n){var r=n(60);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,a);r.locals&&(e.exports=r.locals)},60:function(e,t,n){(t=e.exports=n(17)(!1)).push([e.i,".avatar-1pQUV{width:100%;height:100%;border-radius:100%;overflow:hidden}.avatar-1pQUV img{display:block;width:100%;height:100%}\n",""]),t.locals={avatar:"avatar-1pQUV"}}}]);