(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{216:function(t,e,r){"use strict";r.r(e);var n=r(30),a=r.n(n),o=r(0),i=r.n(o),u=r(1),s=r(13),c=r(11),l=r(77),d=r.n(l),f=r(29),p=r.n(f),m=r(33),g=r(12),b=r(41);class h extends o.Component{constructor(...t){super(...t),a()(this,"state",{loading:!1}),a()(this,"handleSubmit",t=>{t.preventDefault(),this.props.form.validateFields(async(t,e)=>{if(t)return;const{email:r,password:n}=e;this.loading=!0;const{status:a,message:o,authorization:i}=await Object(m.g)(r,p()(n));this.loading=!1,"success"===a?(g.e(i.token,i.maxAge),this.props.updateLoginStatus(!0),this.props.history.replace("/")):c.message.error(o)})})}get loading(){return this.state.loading}set loading(t){this.setState({loading:t})}render(){const{getFieldDecorator:t}=this.props.form,{loading:e}=this;return i.a.createElement("div",{className:d.a.login},i.a.createElement("div",{className:"form-box"},i.a.createElement(c.Form,{onSubmit:this.handleSubmit},i.a.createElement(c.Form.Item,null,t("email",{rules:[{required:!0,message:"请输入邮箱"}]})(i.a.createElement(c.Input,{placeholder:"邮箱",prefix:i.a.createElement(c.Icon,{type:"mail"}),size:"large",allowClear:!0}))),i.a.createElement(c.Form.Item,null,t("password",{rules:[{required:!0,message:"请输入密码"}]})(i.a.createElement(c.Input,{placeholder:"密码",prefix:i.a.createElement(c.Icon,{type:"lock"}),size:"large",type:"password",allowClear:!0}))),i.a.createElement(c.Form.Item,null,i.a.createElement(c.Button,{block:!0,type:"primary",htmlType:"submit",size:"large",loading:e},"登录"))),i.a.createElement("div",{className:"links"},i.a.createElement(u.Link,{to:"/register"},"注册账户"))))}}e.default=Object(u.withRouter)(Object(s.b)(null,(function(t){return{updateLoginStatus:e=>{t(Object(b.a)(e))}}}))(c.Form.create()(h)))},31:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"g",(function(){return i})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return l}));var n=r(32);function a(t,e){return Object(n.a)({url:"/article",method:"post",data:{title:t,markdown:e}})}function o(t,e={}){return Object(n.a)({url:`/article/${t}`,method:"put",data:e})}function i(t,e){return Object(n.a)({url:"/article",params:{pageSize:t,page:e}})}function u(t,e){return Object(n.a)({url:"/allArticle",params:{pageSize:t,page:e}})}function s(t){return Object(n.a)({url:`/article/${t}`})}function c(t,e){return Object(n.a)({url:"/articleVisit",method:"post",data:{articleId:t,userId:e}})}function l(t){return Object(n.a)({url:"/articleDelete",method:"post",data:{ids:t}})}},32:function(t,e,r){"use strict";var n=r(44),a=r.n(n),o=r(3),i=r(11),u=r(12),s=r(45);const c=a.a.create({baseURL:o.a.HTTP_BASE_URL,validateStatus:t=>t>=200&&t<500});e.a=async function(t){const e=Object(u.b)(),r=e?Object(s.merge)({headers:{Authorization:`Bearer ${e}`}},t):t,{data:n,status:a}=await c(r);if(401===a){const t="401";i.notification.error({message:"您未登录或者登录已失效",description:"点我重新登录",duration:null,style:{cursor:"pointer"},key:t,onClick(){location.replace("#/login"),i.notification.close(t)}})}return Promise.resolve(n)}},33:function(t,e,r){"use strict";r.d(e,"g",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"i",(function(){return u})),r.d(e,"e",(function(){return s})),r.d(e,"h",(function(){return c})),r.d(e,"f",(function(){return l}));var n=r(32),a=r(31);function o(t,e){return Object(n.a)({url:"/login",method:"post",data:{email:t,password:e}})}function i(){return Object(n.a)({url:"/user"})}function u(t,e){return Object(n.a)({url:"/user",method:"put",data:{avatar:e,nickname:t}})}function s(t){return Object(n.a)({url:"/mailVerifyCode",method:"post",data:{email:t}})}function c(t,e,r){return Object(n.a)({url:"/register",method:"post",data:{email:t,password:e,verifyCode:r}})}function l(t){return Object(n.a)({url:"/qcloud/uploadCredential",params:{type:t}})}r.d(e,"a",(function(){return a.b})),r.d(e,"b",(function(){return a.d})),r.d(e,"c",(function(){return a.f}))},41:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o}));var n=r(7);function a(t){return{type:n.b,userInfo:t}}function o(t){return{type:n.a,login:t}}},77:function(t,e,r){var n=r(78);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(18)(n,a);n.locals&&(t.exports=n.locals)},78:function(t,e,r){(e=t.exports=r(17)(!1)).push([t.i,".login-A4Jjs{color:white;background:#f0f2f5;min-height:100vh;padding-top:200px}.login-A4Jjs .form-box{width:388px;margin:0 auto}.login-A4Jjs .links{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}.login-A4Jjs .links a{color:#1890ff}.login-A4Jjs .links a:hover{color:rgba(24,144,255,0.5)}\n",""]),e.locals={login:"login-A4Jjs"}}}]);