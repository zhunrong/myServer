(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{214:function(e,t,r){"use strict";r.r(t);var n=r(30),a=r.n(n),o=r(0),i=r.n(o),s=r(1),u=r(13),c=r(11),l=r(77),d=r.n(l),m=r(29),p=r.n(m),f=r(33),g=r(12),b=r(38);class h extends o.Component{constructor(...e){super(...e),a()(this,"state",{loading:!1}),a()(this,"handleSubmit",e=>{e.preventDefault(),this.props.form.validateFields(async(e,t)=>{if(e)return;const{email:r,password:n}=t;this.loading=!0;const{status:a,message:o,authorization:i}=await Object(f.g)(r,p()(n));this.loading=!1,"success"===a?(g.e(i.token,i.maxAge),this.props.updateLoginStatus(!0),this.props.history.replace("/")):c.message.error(o)})})}get loading(){return this.state.loading}set loading(e){this.setState({loading:e})}render(){const{getFieldDecorator:e}=this.props.form,{loading:t}=this;return i.a.createElement("div",{className:d.a.login},i.a.createElement("div",{className:"form-box"},i.a.createElement(c.Form,{onSubmit:this.handleSubmit},i.a.createElement(c.Form.Item,null,e("email",{rules:[{required:!0,message:"请输入邮箱"}]})(i.a.createElement(c.Input,{placeholder:"邮箱",prefix:i.a.createElement(c.Icon,{type:"mail"}),size:"large",allowClear:!0}))),i.a.createElement(c.Form.Item,null,e("password",{rules:[{required:!0,message:"请输入密码"}]})(i.a.createElement(c.Input,{placeholder:"密码",prefix:i.a.createElement(c.Icon,{type:"lock"}),size:"large",type:"password",allowClear:!0}))),i.a.createElement(c.Form.Item,null,i.a.createElement(c.Button,{block:!0,type:"primary",htmlType:"submit",size:"large",loading:t},"登录"))),i.a.createElement("div",{className:"links"},i.a.createElement(s.Link,{to:"/register"},"注册账户"))))}}t.default=Object(s.withRouter)(Object(u.b)(null,(function(e){return{updateLoginStatus:t=>{e(Object(b.a)(t))}}}))(c.Form.create()(h)))},31:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return u}));var n=r(32);function a(e,t){return Object(n.a)({url:"/article",method:"post",data:{title:e,markdown:t}})}function o(e,t,r){return Object(n.a)({url:`/article/${e}`,method:"put",data:{title:t,markdown:r}})}function i(e,t){return Object(n.a)({url:"/allArticle",params:{pageSize:e,page:t}})}function s(e){return Object(n.a)({url:`/article/${e}`})}function u(e,t){return Object(n.a)({url:"/articleVisit",method:"post",data:{articleId:e,userId:t}})}},32:function(e,t,r){"use strict";var n=r(41),a=r.n(n),o=r(3),i=r(11),s=r(12),u=r(42);const c=a.a.create({baseURL:o.a.HTTP_BASE_URL,validateStatus:e=>e>=200&&e<500});t.a=async function(e){const t=Object(s.b)(),r=t?Object(u.merge)({headers:{Authorization:`Bearer ${t}`}},e):e,{data:n,status:a}=await c(r);if(401===a){const e="401";i.notification.error({message:"您未登录或者登录已失效",description:"点我重新登录",duration:null,style:{cursor:"pointer"},key:e,onClick(){location.replace("#/login"),i.notification.close(e)}})}return Promise.resolve(n)}},33:function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"i",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"h",(function(){return c})),r.d(t,"f",(function(){return l}));var n=r(32),a=r(31);function o(e,t){return Object(n.a)({url:"/login",method:"post",data:{email:e,password:t}})}function i(){return Object(n.a)({url:"/user"})}function s(e,t){return Object(n.a)({url:"/user",method:"put",data:{avatar:t,nickname:e}})}function u(e){return Object(n.a)({url:"/mailVerifyCode",method:"post",data:{email:e}})}function c(e,t,r){return Object(n.a)({url:"/register",method:"post",data:{email:e,password:t,verifyCode:r}})}function l(e){return Object(n.a)({url:"/qcloud/uploadCredential",params:{type:e}})}r.d(t,"a",(function(){return a.b})),r.d(t,"b",(function(){return a.c})),r.d(t,"c",(function(){return a.e}))},38:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o}));var n=r(7);function a(e){return{type:n.b,userInfo:e}}function o(e){return{type:n.a,login:e}}},77:function(e,t,r){var n=r(78);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(18)(n,a);n.locals&&(e.exports=n.locals)},78:function(e,t,r){(t=e.exports=r(17)(!1)).push([e.i,".login-A4Jjs{color:white;background:#f0f2f5;min-height:100vh;padding-top:200px}.login-A4Jjs .form-box{width:388px;margin:0 auto}.login-A4Jjs .links{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}.login-A4Jjs .links a{color:#1890ff}.login-A4Jjs .links a:hover{color:rgba(24,144,255,0.5)}\n",""]),t.locals={login:"login-A4Jjs"}}}]);