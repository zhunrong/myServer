(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{203:function(e,t,n){var r=n(204);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,a);r.locals&&(e.exports=r.locals)},204:function(e,t,n){(t=e.exports=n(17)(!1)).push([e.i,".home-3vvV-.ant-layout {\n  min-height: 100vh;\n  color: #f0f2f5;\n  color: #333;\n  position: relative;\n  padding-top: 64px;\n  width: 1000px;\n  margin: 0 auto; }\n\n.home-3vvV- .ant-layout-content {\n  margin-top: 24px; }\n",""]),t.locals={home:"home-3vvV-"}},205:function(e,t,n){var r=n(206);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,a);r.locals&&(e.exports=r.locals)},206:function(e,t,n){(t=e.exports=n(17)(!1)).push([e.i,".navBar-hTkCE {\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  color: #333;\n  z-index: 1;\n  background: white;\n  padding: 0; }\n  .navBar-hTkCE .wrapper {\n    max-width: 1000px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between; }\n  .navBar-hTkCE .ant-menu-horizontal {\n    line-height: 64px; }\n  .navBar-hTkCE .right-box .userinfo {\n    display: flex;\n    cursor: pointer;\n    padding-right: 10px;\n    align-items: center;\n    height: 100%; }\n    .navBar-hTkCE .right-box .userinfo .username {\n      margin-left: 10px; }\n",""]),t.locals={navBar:"navBar-hTkCE"}},224:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n(12),s=n(203),c=n.n(s),u=n(32),l=n.n(u),p=n(205),h=n.n(p),d=n(10),m=n(35),f=n(11),b=n(42),g=n(40);const{Header:v}=d.Layout,{Item:y,Divider:E}=d.Menu;var k=Object(o.withRouter)(Object(i.b)(function(e){return{userInfo:e.common.userInfo}},function(e){return{updateUserInfo:t=>{e(Object(g.b)(t))},updateLoginStatus:t=>{e(Object(g.a)(t))}}})(class extends r.PureComponent{constructor(e){super(e),l()(this,"state",{}),l()(this,"handleDropdownClick",({key:e})=>{switch(e){case"logout":Object(f.e)("",0),this.userInfo=null,this.props.updateLoginStatus(!1),this.props.history.replace("/login");break;case"login":this.props.history.replace("/login");break;case"personSetting":this.props.history.push("/userSetting");break;case"newArticle":Object(f.d)(""),this.props.history.push("/editor");break;case"blog":this.props.history.push("/blog");break;case"pictures":this.props.history.push("/pictures");break;case"system":this.props.history.push("/system")}}),l()(this,"getUserInfo",async()=>{const{status:e,user:t}=await Object(m.d)();"success"===e&&(this.userInfo=t)}),Object(f.b)()&&this.getUserInfo()}get userInfo(){return this.props.userInfo}set userInfo(e){this.props.updateUserInfo(e)}render(){const{userInfo:e}=this;let t=[];switch(this.props.location.pathname){case"/blog":t=["blog"];break;case"/system":t=["system"];break;default:t=[]}return a.a.createElement(v,{className:h.a.navBar},a.a.createElement("div",{className:"wrapper"},a.a.createElement(d.Menu,{mode:"horizontal",theme:"light",selectedKeys:t,onClick:this.handleDropdownClick},a.a.createElement(y,{key:"blog"},"Blog"),e&&0===e.role&&a.a.createElement(y,{key:"system"},"系统管理")),a.a.createElement("div",{className:"right-box"},a.a.createElement(d.Dropdown,{overlay:(n=this,r=!!e,r?a.a.createElement(d.Menu,{onClick:n.handleDropdownClick},a.a.createElement(y,{key:"newArticle"},a.a.createElement(d.Icon,{type:"edit"}),"写文章"),a.a.createElement(y,{key:"pictures"},a.a.createElement(d.Icon,{type:"picture"}),"我的图库"),a.a.createElement(y,{key:"personSetting"},a.a.createElement(d.Icon,{type:"user"}),"个人设置"),a.a.createElement(E,null),a.a.createElement(y,{key:"logout"},a.a.createElement(d.Icon,{type:"logout"}),"退出登录")):a.a.createElement(d.Menu,{onClick:n.handleDropdownClick},a.a.createElement(y,{key:"login"},a.a.createElement(d.Icon,{type:"login"}),"去登录")))},e?a.a.createElement("div",{className:"userinfo"},a.a.createElement(b.a,{width:44,height:44,src:e.avatar}),a.a.createElement("div",{className:"username"},e.nickname||e.email)):a.a.createElement("div",{className:"userinfo"},a.a.createElement(b.a,{width:44,height:44,src:""}),a.a.createElement("div",{className:"username"},"游客"))))));var n,r}})),w=n(5);const{Content:j}=d.Layout,O=Object(w.a)(()=>n.e(14).then(n.bind(null,220))),x=Object(w.a)(()=>Promise.all([n.e(1),n.e(7)]).then(n.bind(null,223))),I=Object(w.a)(()=>Promise.all([n.e(2),n.e(13)]).then(n.bind(null,221))),C=Object(w.a)(()=>Promise.all([n.e(1),n.e(8)]).then(n.bind(null,226))),S=Object(w.a)(()=>n.e(15).then(n.bind(null,222)));t.default=Object(o.withRouter)(Object(i.b)(function(e){return{userInfo:e.common.userInfo}})(class extends r.Component{render(){const{userInfo:e}=this.props;return a.a.createElement(d.Layout,{className:c.a.home},a.a.createElement(k,null),a.a.createElement(j,null,a.a.createElement(o.Switch,null,a.a.createElement(o.Route,{path:"/userSetting",component:x}),a.a.createElement(o.Route,{path:"/blog",component:O}),a.a.createElement(o.Route,{path:"/article/:id",component:I}),a.a.createElement(o.Route,{path:"/pictures",component:C}),e&&0===e.role&&a.a.createElement(o.Route,{path:"/system",component:S}),a.a.createElement(o.Redirect,{to:"/blog"}))))}}))},33:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return c});var r=n(34);function a(e,t){return Object(r.a)({url:"/article",method:"post",data:{title:e,markdown:t}})}function o(e,t,n){return Object(r.a)({url:`/article/${e}`,method:"put",data:{title:t,markdown:n}})}function i(e,t){return Object(r.a)({url:"/allArticle",params:{pageSize:e,page:t}})}function s(e){return Object(r.a)({url:`/article/${e}`})}function c(e,t){return Object(r.a)({url:"/articleVisit",method:"post",data:{articleId:e,userId:t}})}},34:function(e,t,n){"use strict";var r=n(43),a=n.n(r),o=n(3),i=n(10),s=n(11),c=n(44);const u=a.a.create({baseURL:o.a.HTTP_BASE_URL,validateStatus:e=>e>=200&&e<500});t.a=async function(e){const t=Object(s.b)(),n=t?Object(c.merge)({headers:{Authorization:`Bearer ${t}`}},e):e,{data:r,status:a}=await u(n);if(401===a){const e="401";i.notification.error({message:"您未登录或者登录已失效",description:"点我重新登录",duration:null,style:{cursor:"pointer"},key:e,onClick(){location.replace("#/login"),i.notification.close(e)}})}return Promise.resolve(r)}},35:function(e,t,n){"use strict";n.d(t,"g",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return l});var r=n(34),a=n(33);function o(e,t){return Object(r.a)({url:"/login",method:"post",data:{email:e,password:t}})}function i(){return Object(r.a)({url:"/user"})}function s(e,t){return Object(r.a)({url:"/user",method:"put",data:{avatar:t,nickname:e}})}function c(e){return Object(r.a)({url:"/mailVerifyCode",method:"post",data:{email:e}})}function u(e,t,n){return Object(r.a)({url:"/register",method:"post",data:{email:e,password:t,verifyCode:n}})}function l(e){return Object(r.a)({url:"/qcloud/uploadCredential",params:{type:e}})}n.d(t,"a",function(){return a.b}),n.d(t,"b",function(){return a.c}),n.d(t,"c",function(){return a.e})},39:function(e,t,n){e.exports=n.p+"./static/images/avatar.svg"},40:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=n(7);function a(e){return{type:r.b,userInfo:e}}function o(e){return{type:r.a,login:e}}},42:function(e,t,n){"use strict";var r=n(32),a=n.n(r),o=n(0),i=n.n(o),s=n(61),c=n.n(s);t.a=class extends o.Component{constructor(e){super(e),a()(this,"handleError",()=>{this.setState({url:n(39)})}),this.state={url:e.src||n(39)}}componentWillReceiveProps(e){this.setState({url:e.src||n(39)})}render(){let{width:e,height:t}=this.props;const{url:n}=this.state;"number"==typeof(e=e||"100%")&&(e=`${e}px`),"number"==typeof(t=t||"100%")&&(t=`${t}px`);const r={width:e,height:t};return i.a.createElement("div",{className:c.a.avatar,style:r},i.a.createElement("img",{src:n,alt:"avatar",onError:this.handleError}))}}},61:function(e,t,n){var r=n(62);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,a);r.locals&&(e.exports=r.locals)},62:function(e,t,n){(t=e.exports=n(17)(!1)).push([e.i,".avatar-1pQUV {\n  width: 100%;\n  height: 100%;\n  border-radius: 100%;\n  overflow: hidden; }\n  .avatar-1pQUV img {\n    display: block;\n    width: 100%;\n    height: 100%; }\n",""]),t.locals={avatar:"avatar-1pQUV"}}}]);